<!DOCTYPE html>
<html lang="fr" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sahab Voyages | Excellence & Voyage</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&family=Montserrat:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <style>
        :root {
            --sahab-blue: #004aad;
            --sahab-gold: #c5a059;
        }
        body { font-family: 'Montserrat', sans-serif; background-color: #ffffff; scroll-behavior: smooth; }
        .rtl { font-family: 'Cairo', sans-serif; direction: rtl; }
        
        .hero-section {
            background-image: url('https://res.cloudinary.com/dkusr0hu1/image/upload/WhatsApp_Image_2025-12-25_at_10.55.21_yrxybi');
            background-size: cover;
            background-position: center;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .hero-overlay {
            position: absolute;
            inset: 0;
            background: rgba(0, 0, 0, 0.15);
        }

        .nav-logo { height: 110px; width: auto; transition: transform 0.3s; }
        .nav-logo:hover { transform: scale(1.05); }

        /* Offres Styling */
        .offer-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            transition: 0.3s;
            border: 1px solid #f0f0f0;
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        .offer-card:hover { transform: translateY(-10px); box-shadow: 0 15px 40px rgba(0,0,0,0.15); }

        .image-container {
            width: 100%;
            height: 300px;
            padding: 10px;
            background: #fff;
        }
        .image-container img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 12px;
        }

        .btn-action {
            background-color: #25d366;
            color: white;
            padding: 12px;
            border-radius: 12px;
            text-align: center;
            font-weight: 800;
            display: block;
            margin-top: auto;
            transition: 0.3s;
        }
        .btn-visa { background-color: var(--sahab-blue); }

        .section-tab {
            cursor: pointer;
            padding: 10px 16px;
            border-radius: 50px;
            font-weight: 800;
            transition: 0.3s;
            border: 2px solid #e5e7eb;
            white-space: nowrap;
            font-size: 14px;
        }

        @media (max-width: 640px) {
            .section-tab {
                padding: 8px 12px;
                font-size: 12px;
                font-weight: 700;
            }
        }
        .active-tab { background: var(--sahab-blue); color: white; border-color: var(--sahab-blue); }

        .page-section { display: none; }
        .active-section { display: block; }

        .client-photo-card {
            border-radius: 30px;
            overflow: hidden;
            box-shadow: 0 15px 45px rgba(0,0,0,0.12);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            border: 8px solid #fff;
            position: relative;
            background: white;
        }

        /* Chat & Floating Buttons */
        .floating-container {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .float-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 28px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
            cursor: pointer;
            transition: 0.3s;
        }
        .btn-chat { background: var(--sahab-blue); }
        .btn-wa-float { background: #25d366; }

        /* UPGRADED CHAT STYLES */
        #chatWindow {
            position: fixed;
            bottom: 110px;
            right: 30px;
            width: 360px;
            height: 520px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 15px 50px rgba(0,0,0,0.2);
            z-index: 1001;
            display: none;
            flex-direction: column;
            overflow: hidden;
        }
        .chat-header { background: var(--sahab-blue); color: white; padding: 18px; display: flex; justify-content: space-between; align-items: center; }
        .chat-messages { flex-grow: 1; padding: 15px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; background: #f8fafc; }
        .msg { padding: 10px 15px; border-radius: 15px; max-width: 85%; font-size: 14px; line-height: 1.5; }
        .msg-bot { background: #e2e8f0; align-self: flex-start; border-bottom-left-radius: 5px; }
        .msg-user { background: var(--sahab-blue); color: white; align-self: flex-end; border-bottom-right-radius: 5px; }
        .quick-btn {
            padding: 6px 12px;
            background: white;
            border: 1px solid #cbd5e1;
            color: var(--sahab-blue);
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            white-space: nowrap;
        }
        .quick-btn:hover { background: var(--sahab-blue); color: white; border-color: var(--sahab-blue); }
        #userInput {
            flex-grow: 1;
            padding: 12px 15px;
            border: 1px solid #d1d5db;
            border-radius: 12px 0 0 12px;
            outline: none;
            font-size: 14px;
        }
        #userInput:focus { border-color: var(--sahab-blue); }
        #sendButton {
            background: var(--sahab-blue);
            color: white;
            border: none;
            padding: 0 20px;
            border-radius: 0 12px 12px 0;
            font-weight: bold;
            cursor: pointer;
        }
        #sendButton:hover { background: #003a8a; }
        .chat-messages a {
            color: #2563eb;
            text-decoration: underline;
            font-weight: 600;
        }
        
        .tabs-container {
            display: flex;
            overflow-x: auto;
            gap: 8px;
            padding-bottom: 10px;
            justify-content: center;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }

        .tabs-container::-webkit-scrollbar {
            display: none;
        }

        @media (max-width: 640px) {
            .tabs-container {
                justify-content: flex-start;
                padding-left: 10px;
                padding-right: 10px;
                gap: 6px;
            }
            #chatWindow {
                width: 90%;
                right: 5%;
                height: 70vh;
                bottom: 100px;
            }
        }
    </style>
</head>
<body>

    <!-- Navigation (Unchanged) -->
    <nav class="bg-white/95 backdrop-blur-md shadow-md fixed top-0 w-full z-50">
        <div class="max-w-7xl mx-auto px-6 h-28 flex justify-between items-center">
            <div class="flex items-center gap-4 cursor-pointer" onclick="showSection('home')">
                <img src="https://res.cloudinary.com/dkusr0hu1/image/upload/v1766748193/LOGO_SAHAB_cr3qjr.png" alt="Sahab Logo" class="nav-logo">
            </div>
            
            <div class="hidden md:flex gap-10 font-bold items-center text-lg">
                <button onclick="showSection('home')" class="hover:text-blue-700">Accueil</button>
                <button onclick="showSection('about')" class="hover:text-blue-700">Ã€ Propos</button>
                <button onclick="showSection('offers')" class="hover:text-blue-700">Nos Offres</button>
                <button onclick="showSection('contact')" class="hover:text-blue-700">Contact</button>
                <a href="https://wa.me/212623945729" target="_blank" class="bg-blue-800 text-white px-6 py-2 rounded-full hover:bg-blue-700 transition">Contact WhatsApp</a>
            </div>
            
            <button class="md:hidden text-3xl" onclick="toggleMenu()"><i class="fas fa-bars"></i></button>
        </div>
        <div id="mobileMenu" class="hidden bg-white border-t p-6 flex flex-col gap-4 shadow-xl">
            <button onclick="showSection('home')" class="text-left font-bold">Accueil</button>
            <button onclick="showSection('about')" class="text-left font-bold">Ã€ Propos</button>
            <button onclick="showSection('offers')" class="text-left font-bold">Nos Offres</button>
            <button onclick="showSection('contact')" class="text-left font-bold">Contact</button>
        </div>
    </nav>

    <main class="pt-28">
        
        <!-- Section Accueil (Unchanged) -->
        <section id="home" class="page-section active-section">
            <div class="hero-section">
                <div class="hero-overlay"></div>
                <div class="relative z-10 text-center px-4">
                    <h1 class="text-6xl md:text-8xl font-black text-white drop-shadow-2xl mb-4">SAHAB VOYAGES</h1>
                    <p class="text-2xl md:text-4xl text-white font-semibold mb-8">L'excellence au service de vos voyages</p>
                    <button onclick="showSection('offers')" class="bg-white text-blue-900 px-12 py-5 rounded-2xl font-black text-xl hover:scale-105 transition shadow-2xl">DÃ‰COUVRIR NOS OFFRES</button>
                </div>
            </div>

            <!-- Gallery -->
            <div class="py-24 bg-gradient-to-b from-white to-slate-100 px-6">
                <div class="max-w-7xl mx-auto text-center">
                    <h2 class="text-4xl md:text-6xl font-black mb-4 text-blue-900">Entrezâ€¦ et ressentez lâ€™instant</h2>
                    <p class="text-xl md:text-2xl text-gray-600 font-medium mb-16">Des moments rares de nos voyages spirituels</p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-10 lg:gap-14 px-4">
                        <div class="client-photo-card"><img src="https://res.cloudinary.com/dkusr0hu1/image/upload/v1766771737/PHOTO-2_drs1nb.jpg" alt="Client 1"></div>
                        <div class="client-photo-card"><img src="https://res.cloudinary.com/dkusr0hu1/image/upload/v1766771737/PHOTO-1_bioqpk.jpg" alt="Client 2"></div>
                        <div class="client-photo-card"><img src="https://res.cloudinary.com/dkusr0hu1/image/upload/v1766771737/LOGO-4_sdekyk.jpg" alt="Client 3"></div>
                        <div class="client-photo-card"><img src="https://res.cloudinary.com/dkusr0hu1/image/upload/v1766771745/PHOTO-3_fzimde.jpg" alt="Client 4"></div>
                    </div>
                    <!-- Client Reviews -->
                    <div class="mt-24 max-w-5xl mx-auto">
                        <h3 class="text-3xl font-black mb-12 text-blue-900">Avis de nos clients</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-left">
                            <div class="bg-white p-8 rounded-3xl shadow-lg border-t-4 border-blue-600">
                                <div class="text-amber-500 mb-4 text-xl"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></div>
                                <p class="text-gray-700 mb-4 font-bold">"Meilleure agence de voyage et meilleur accueil. Qu'Allah vous facilite."</p>
                                <h5 class="font-black text-blue-900 text-lg">- Issam El Bidaoui</h5>
                            </div>
                            <div class="bg-white p-8 rounded-3xl shadow-lg border-t-4 border-blue-600">
                                <div class="text-amber-500 mb-4 text-xl"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></div>
                                <p class="text-gray-700 mb-4 font-bold">"Une agence avec beaucoup de crÃ©dibilitÃ©. Un grand merci Ã  M. Issam pour son professionnalisme."</p>
                                <h5 class="font-black text-blue-900 text-lg">- Mohammed Tighzoui</h5>
                            </div>
                            <div class="bg-white p-8 rounded-3xl shadow-lg border-t-4 border-blue-600">
                                <div class="text-amber-500 mb-4 text-xl"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></div>
                                <p class="text-gray-700 mb-4 font-bold">"J'ai eu l'honneur de travailler avec votre agence, service merveilleux et comportement raffinÃ©, merci beaucoup ğŸ‘Œâ¤ï¸â¤ï¸."</p>
                                <h5 class="font-black text-blue-900 text-lg">- Nassima Aitbrahim</h5>
                            </div>
                        </div>
                        <div class="mt-12 text-center">
                            <a href="https://goo.gl/maps/7vuiHnpUBmmyvKeK6" target="_blank" class="inline-block bg-blue-900 text-white px-8 py-3 rounded-full font-bold hover:bg-blue-800 transition">
                                En savoir plus sur Google Maps <i class="fas fa-external-link-alt ml-2"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Ã€ Propos (Unchanged) -->
        <section id="about" class="page-section py-20 px-6 bg-white">
            <div class="max-w-5xl mx-auto">
                <div class="text-center mb-12">
                    <h2 class="text-4xl md:text-6xl font-black text-blue-900 mb-6">Ã€ Propos de Nous</h2>
                    <div class="w-32 h-2 bg-gold mx-auto" style="background:var(--sahab-gold)"></div>
                </div>
                <div class="bg-slate-50 p-10 rounded-[40px] shadow-sm border-l-8 border-blue-900">
                    <div class="text-lg md:text-xl leading-relaxed text-gray-800 space-y-8 font-medium">
                        <p>Sahab Voyages est une agence marocaine ğŸ‡²ğŸ‡¦ spÃ©cialisÃ©e dans le tourisme, le voyage et les services associÃ©s. Nous mettons notre expertise et notre passion au service de nos clients afin de crÃ©er des expÃ©riences de voyage uniques et inoubliables.</p>
                        <p>Nous proposons une gamme complÃ¨te de services comprenant les voyages aÃ©riens et maritimes âœˆï¸, lâ€™organisation des voyages de Hajj et Omra ğŸ•‹, lâ€™obtention de visas, la rÃ©servation dâ€™hÃ´tels, ainsi que de nombreuses autres prestations touristiques adaptÃ©es aux besoins de chaque voyageur.</p>
                        <p>Chez Sahab Voyages, nous nous engageons Ã  offrir des services de haute qualitÃ©, fondÃ©s sur la confiance, le professionnalisme et la satisfaction du client, en accompagnant chaque voyageur Ã  chaque Ã©tape de son parcours.</p>
                        <p class="text-2xl font-black text-blue-900 text-center pt-6">Sahab Voyagesâ€¦ parce que chaque voyage mÃ©rite de commencer en toute confiance et de se terminer par des souvenirs inoubliables.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Nos Offres (Unchanged) -->
        <section id="offers" class="page-section py-20 px-4 bg-slate-50">
            <div class="max-w-7xl mx-auto">
                <div class="text-center mb-16">
                    <h2 class="text-5xl font-black mb-10">Nos Offres</h2>
                    <div class="tabs-container mb-12">
                        <button onclick="filterOffers('all')" id="tab-all" class="section-tab active-tab">Tout</button>
                        <button onclick="filterOffers('omra')" id="tab-omra" class="section-tab bg-white shadow">Omra & Hajj</button>
                        <button onclick="filterOffers('visa')" id="tab-visa" class="section-tab bg-white shadow">Visa</button>
                        <button onclick="filterOffers('voyage')" id="tab-voyage" class="section-tab bg-white shadow">Voyages OrganisÃ©s</button>
                        <button onclick="filterOffers('billet')" id="tab-billet" class="section-tab bg-white shadow">Billetterie & HÃ´tels</button>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10" id="offersGrid">
                    <!-- Section Omra & Hajj -->
                    <div class="offer-card" data-cat="omra">
                        <div class="image-container"><img src="https://res.cloudinary.com/dkusr0hu1/image/upload/v1766659933/%D8%B1%D8%AD%D9%84%D8%A9_%D9%8A%D9%86%D8%A7%D9%8A%D8%B1_zebgu6.png"></div>
                        <div class="p-8">
                            <h3 class="text-xl font-black mb-2">Omra Janvier 2026 (Ã‰conomique)</h3>
                            <p class="text-blue-600 font-bold mb-6">Dates : du 03 au 15 jan. ou 12 au 26 jan.</p>
                            <a href="https://wa.me/p/25709642965314217/212623945729" target="_blank" class="btn-action">En savoir plus</a>
                        </div>
                    </div>
                    
                    <div class="offer-card" data-cat="omra">
                        <div class="image-container"><img src="https://res.cloudinary.com/dkusr0hu1/image/upload/v1766659957/%D8%B9%D9%85%D8%B1%D8%A9_%D8%B4%D8%B9%D8%A8%D8%A7%D9%86_idphpj.png"></div>
                        <div class="p-8">
                            <h3 class="text-xl font-black mb-2">Omra ChaÃ¢bane 2026</h3>
                            <p class="text-blue-600 font-bold mb-6">Dates : du 26 janvier au 9 fÃ©vrier</p>
                            <a href="https://wa.me/p/25828021510116298/212623945729" target="_blank" class="btn-action">En savoir plus</a>
                        </div>
                    </div>
                    
                    <div class="offer-card" data-cat="omra">
                        <div class="image-container"><img src="https://res.cloudinary.com/dkusr0hu1/image/upload/v1766659933/%D8%B9%D9%85%D8%B1%D8%A9_%D8%B4%D8%B9%D8%A8%D8%A7%D9%86_%D9%88_%D8%B1%D9%85%D8%B6%D8%A7%D9%86_alq416.png"></div>
                        <div class="p-8">
                            <h3 class="text-xl font-black mb-2">Omra ChaÃ¢bane & Ramadan 2026</h3>
                            <p class="text-blue-600 font-bold mb-6">Dates : du 03 au 23 fÃ©vrier</p>
                            <a href="https://wa.me/p/25953131680990622/212623945729" target="_blank" class="btn-action">En savoir plus</a>
                        </div>
                    </div>
                    
                    <div class="offer-card" data-cat="omra">
                        <div class="image-container"><img src="https://res.cloudinary.com/dkusr0hu1/image/upload/v1766757785/%D8%B9%D9%85%D8%B1%D8%A9_%D8%B4%D9%88%D8%A7%D9%84_d4rmgm.jpg"></div>
                        <div class="p-8">
                            <h3 class="text-xl font-black mb-2">Omra Shawwal 2026</h3>
                            <p class="text-blue-600 font-bold mb-6">Dates : Du 28 mars au 09 avril</p>
                            <a href="https://wa.me/p/32805010729147397/212623945729" target="_blank" class="btn-action">En savoir plus</a>
                        </div>
                    </div>
                    
                    <div class="offer-card" data-cat="omra">
                        <div class="image-container"><img src="https://res.cloudinary.com/dkusr0hu1/image/upload/v1766757785/%D8%B9%D9%85%D8%B1%D8%A9_%D8%B1%D9%85%D8%B6%D8%A7%D9%86_lfum5k.jpg"></div>
                        <div class="p-8">
                            <h3 class="text-xl font-black mb-2">Omra Ramadan 2026</h3>
                            <p class="text-blue-600 font-bold mb-6">Dates : Du 19 fÃ©vrier au 24 mars</p>
                            <a href="https://wa.me/p/26571919809063840/212623945729" target="_blank" class="btn-action">En savoir plus</a>
                        </div>
                    </div>

                    <!-- Section Visas -->
                    <div class="offer-card" data-cat="visa">
                        <div class="image-container"><img src="https://res.cloudinary.com/dkusr0hu1/image/upload/v1766870009/VISA-QATAR_sawtsc.png"></div>
                        <div class="p-8">
                            <h3 class="text-xl font-black mb-2">Visa Ã‰tat du Qatar</h3>
                            <a href="https://wa.me/p/25491260960567909/212623945729" target="_blank" class="btn-action btn-visa">Commander</a>
                        </div>
                    </div>
                    
                    <div class="offer-card" data-cat="visa">
                        <div class="image-container"><img src="https://res.cloudinary.com/dkusr0hu1/image/upload/v1766759766/Visa_Saudi_pu1rai.jpg"></div>
                        <div class="p-8">
                            <h3 class="text-xl font-black mb-2">Visa Arabie Saoudite (4 jours)</h3>
                            <a href="https://wa.me/p/6635789499807855/212623945729" target="_blank" class="btn-action btn-visa">Commander</a>
                        </div>
                    </div>
                    
                    <div class="offer-card" data-cat="visa">
                        <div class="image-container"><img src="https://res.cloudinary.com/dkusr0hu1/image/upload/v1766870464/VISA-OMAN_vm0igd.png"></div>
                        <div class="p-8">
                            <h3 class="text-xl font-black mb-2">Visa Oman</h3>
                            <a href="https://wa.me/p/24948802458133196/212623945729" target="_blank" class="btn-action btn-visa">Commander</a>
                        </div>
                    </div>
                    
                    <div class="offer-card" data-cat="visa">
                        <div class="image-container"><img src="https://res.cloudinary.com/dkusr0hu1/image/upload/v1766759766/Visa_Bahrin_ojx0op.jpg"></div>
                        <div class="p-8">
                            <h3 class="text-xl font-black mb-2">Visa BahreÃ¯n</h3>
                            <a href="https://wa.me/p/6527925420589249/212623945729" target="_blank" class="btn-action btn-visa">Commander</a>
                        </div>
                    </div>
                    
                    <div class="offer-card" data-cat="visa">
                        <div class="image-container"><img src="https://res.cloudinary.com/dkusr0hu1/image/upload/v1766871324/VISA-SAUDI_m7suk7.png"></div>
                        <div class="p-8">
                            <h3 class="text-xl font-black mb-2">Visa Arabie Saoudite (365 jours - EntrÃ©es multiples)</h3>
                            <a href="https://wa.me/p/6635909943111318/212623945729" target="_blank" class="btn-action btn-visa">Commander</a>
                        </div>
                    </div>
                    
                    <div class="offer-card" data-cat="visa">
                        <div class="image-container"><img src="https://res.cloudinary.com/dkusr0hu1/image/upload/v1766759766/Qatar_-_Saudi_-_Bahrain_-_.._vu9tgy.jpg"></div>
                        <div class="p-8">
                            <h3 class="text-xl font-black mb-2">Visa CombinÃ© (Ã‰mirats, Arabie, Qatar, BahreÃ¯n, Oman)</h3>
                            <a href="https://wa.me/p/6655750361179310/212623945729" target="_blank" class="btn-action btn-visa">Commander</a>
                        </div>
                    </div>
                    
                    <div class="offer-card" data-cat="visa">
                        <div class="image-container"><img src="https://res.cloudinary.com/dkusr0hu1/image/upload/v1766918912/VISA-Emarate_jkuqau.png"></div>
                        <div class="p-8">
                            <h3 class="text-xl font-black mb-2">Visa Ã‰mirats Arabes Unis</h3>
                            <a href="https://wa.me/212623945729" target="_blank" class="btn-action btn-visa">Commander WhatsApp</a>
                        </div>
                    </div>
                    
                    <div class="offer-card" data-cat="visa">
                        <div class="image-container"><img src="https://res.cloudinary.com/dkusr0hu1/image/upload/v1766919120/VISA-Egypt_yoofus.png"></div>
                        <div class="p-8">
                            <h3 class="text-xl font-black mb-2">Visa Ã‰gypte</h3>
                            <a href="https://wa.me/212623945729" target="_blank" class="btn-action btn-visa">Commander WhatsApp</a>
                        </div>
                    </div>

                    <!-- Section Voyages OrganisÃ©s -->
                    <div class="offer-card" data-cat="voyage">
                        <div class="image-container"><img src="https://res.cloudinary.com/dkusr0hu1/image/upload/v1766858375/MOROCCO_2_okdxll.jpg"></div>
                        <div class="p-8 flex flex-col flex-grow">
                            <h3 class="text-xl font-black mb-4">Voyage Maroc</h3>
                            <a href="https://wa.me/212623945729" target="_blank" class="btn-action">WhatsApp Direct</a>
                        </div>
                    </div>
                    
                    <div class="offer-card" data-cat="voyage">
                        <div class="image-container"><img src="https://res.cloudinary.com/dkusr0hu1/image/upload/v1766858373/EGYPT_z4ofdu.jpg"></div>
                        <div class="p-8 flex flex-col flex-grow">
                            <h3 class="text-xl font-black mb-4">Voyage Ã‰gypte</h3>
                            <a href="https://wa.me/212623945729" target="_blank" class="btn-action">WhatsApp Direct</a>
                        </div>
                    </div>
                    
                    <div class="offer-card" data-cat="voyage">
                        <div class="image-container"><img src="https://res.cloudinary.com/dkusr0hu1/image/upload/v1766858372/EMARATE_uxuwuk.jpg"></div>
                        <div class="p-8 flex flex-col flex-grow">
                            <h3 class="text-xl font-black mb-4">Voyage Ã‰mirats Arabes Unis</h3>
                            <a href="https://wa.me/212623945729" target="_blank" class="btn-action">WhatsApp Direct</a>
                        </div>
                    </div>
                    
                    <div class="offer-card" data-cat="voyage">
                        <div class="image-container"><img src="https://res.cloudinary.com/dkusr0hu1/image/upload/v1766858283/BAHRAIN_jfazqq.jpg"></div>
                        <div class="p-8 flex flex-col flex-grow">
                            <h3 class="text-xl font-black mb-4">Voyage BahreÃ¯n</h3>
                            <a href="https://wa.me/212623945729" target="_blank" class="btn-action">WhatsApp Direct</a>
                        </div>
                    </div>
                    
                    <div class="offer-card" data-cat="voyage">
                        <div class="image-container"><img src="https://res.cloudinary.com/dkusr0hu1/image/upload/v1766858374/QATAR_x4kerr.jpg"></div>
                        <div class="p-8 flex flex-col flex-grow">
                            <h3 class="text-xl font-black mb-4">Voyage Qatar</h3>
                            <a href="https://wa.me/212623945729" target="_blank" class="btn-action">WhatsApp Direct</a>
                        </div>
                    </div>
                    
                    <div class="offer-card" data-cat="voyage">
                        <div class="image-container"><img src="https://res.cloudinary.com/dkusr0hu1/image/upload/v1766858823/VITNAM_oush4e.jpg"></div>
                        <div class="p-8 flex flex-col flex-grow">
                            <h3 class="text-xl font-black mb-4">Voyage ViÃªt Nam</h3>
                            <a href="https://wa.me/212623945729" target="_blank" class="btn-action">WhatsApp Direct</a>
                        </div>
                    </div>
                    
                    <div class="offer-card" data-cat="voyage">
                        <div class="image-container"><img src="https://res.cloudinary.com/dkusr0hu1/image/upload/v1766858379/SANGAFORA_qzofa1.jpg"></div>
                        <div class="p-8 flex flex-col flex-grow">
                            <h3 class="text-xl font-black mb-4">Voyage Singapour</h3>
                            <a href="https://wa.me/212623945729" target="_blank" class="btn-action">WhatsApp Direct</a>
                        </div>
                    </div>
                    
                    <div class="offer-card" data-cat="voyage">
                        <div class="image-container"><img src="https://res.cloudinary.com/dkusr0hu1/image/upload/v1766858373/INDONISIA_m2enha.jpg"></div>
                        <div class="p-8 flex flex-col flex-grow">
                            <h3 class="text-xl font-black mb-4">Voyage IndonÃ©sie</h3>
                            <a href="https://wa.me/212623945729" target="_blank" class="btn-action">WhatsApp Direct</a>
                        </div>
                    </div>
                    
                    <div class="offer-card" data-cat="voyage">
                        <div class="image-container"><img src="https://res.cloudinary.com/dkusr0hu1/image/upload/v1766858817/TAYLAND_nmbahl.jpg"></div>
                        <div class="p-8 flex flex-col flex-grow">
                            <h3 class="text-xl font-black mb-4">Voyage ThaÃ¯lande</h3>
                            <a href="https://wa.me/212623945729" target="_blank" class="btn-action">WhatsApp Direct</a>
                        </div>
                    </div>
                    
                    <div class="offer-card" data-cat="voyage">
                        <div class="image-container"><img src="https://res.cloudinary.com/dkusr0hu1/image/upload/v1766858415/SRILANKA_e91f1o.jpg"></div>
                        <div class="p-8 flex flex-col flex-grow">
                            <h3 class="text-xl font-black mb-4">Voyage Sri Lanka</h3>
                            <a href="https://wa.me/212623945729" target="_blank" class="btn-action">WhatsApp Direct</a>
                        </div>
                    </div>
                    
                    <div class="offer-card" data-cat="voyage">
                        <div class="image-container"><img src="https://res.cloudinary.com/dkusr0hu1/image/upload/v1766858372/MALIZYA_yannvd.jpg"></div>
                        <div class="p-8 flex flex-col flex-grow">
                            <h3 class="text-xl font-black mb-4">Voyage Malaisie</h3>
                            <a href="https://wa.me/212623945729" target="_blank" class="btn-action">WhatsApp Direct</a>
                        </div>
                    </div>

                    <!-- Section Billetterie & HÃ´tels -->
                    <div class="offer-card" data-cat="billet">
                        <div class="image-container"><img src="https://res.cloudinary.com/dkusr0hu1/image/upload/v1766771094/HAJZ_cpo63j.jpg"></div>
                        <div class="p-8">
                            <h3 class="text-xl font-black mb-4">RÃ©servation Billet</h3>
                            <a href="https://wa.me/p/9734168360040574/212623945729" target="_blank" class="btn-action">RÃ©server</a>
                        </div>
                    </div>
                    
                    <div class="offer-card" data-cat="billet">
                        <div class="image-container"><img src="https://res.cloudinary.com/dkusr0hu1/image/upload/v1767003257/r%C3%A9servation_h%C3%B4tel_vgneua.png"></div>
                        <div class="p-8">
                            <h3 class="text-xl font-black mb-4">RÃ©servation HÃ´tel</h3>
                            <a href="https://wa.me/p/33021797887466015/212623945729" target="_blank" class="btn-action">RÃ©server</a>
                        </div>
                    </div>
                    
                    <div class="offer-card" data-cat="billet">
                        <div class="image-container"><img src="https://res.cloudinary.com/dkusr0hu1/image/upload/v1767003391/r%C3%A9servation_h%C3%B4tel_et_billet_pour_visa_wjjywh.png"></div>
                        <div class="p-8">
                            <h3 class="text-xl font-black mb-4">RÃ©servation HÃ´tel & Billet (Pour Visa)</h3>
                            <a href="https://wa.me/p/33661500800129900/212623945729" target="_blank" class="btn-action">RÃ©server</a>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Floating UI -->
    <div class="floating-container">
        <a href="https://wa.me/212623945729" target="_blank" class="float-btn btn-wa-float"><i class="fab fa-whatsapp"></i></a>
        <div class="float-btn btn-chat" onclick="toggleChat()"><i class="fas fa-comment-dots"></i></div>
    </div>

    <!-- ============ UPGRADED BOT WINDOW ============ -->
    <div id="chatWindow">
        <div class="chat-header">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center text-blue-900"><i class="fas fa-robot"></i></div>
                <div>
                    <h5 class="font-bold">Assistant Sahab</h5>
                    <small>En ligne â€¢ PrÃªt Ã  vous aider</small>
                </div>
            </div>
            <button onclick="toggleChat()" class="text-white hover:text-gray-300"><i class="fas fa-times"></i></button>
        </div>
        <div class="chat-messages" id="chatMsgs">
            <!-- Messages will be inserted here by JavaScript -->
        </div>
        <!-- Quick Action Buttons -->
        <div class="p-3 border-t border-gray-200 bg-blue-50 flex flex-wrap gap-2">
            <button class="quick-btn" onclick="sendQuickQuestion('Quel est le prix de lâ€™Omra ?')">ğŸ’° Prix Omra</button>
            <button class="quick-btn" onclick="sendQuickQuestion('Visa Arabie Saoudite')">ğŸ›‚ Visa Arabie</button>
            <button class="quick-btn" onclick="sendQuickQuestion('Adresse Casablanca')">ğŸ“ Adresse</button>
            <button class="quick-btn" onclick="sendQuickQuestion('Horaires dâ€™ouverture')">ğŸ•˜ Horaires</button>
        </div>
        <!-- User Input Area -->
        <div class="p-3 border-t border-gray-200 flex">
            <input type="text" id="userInput" placeholder="Tapez votre question ici..." class="flex-grow p-3 border rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500" onkeypress="handleKeyPress(event)">
            <button onclick="sendUserMessage()" class="bg-blue-800 text-white px-5 rounded-r-lg font-bold hover:bg-blue-700"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>

    <!-- Footer (Unchanged) -->
    <footer class="bg-gray-950 text-white py-20 px-6">
        <div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-4 gap-12 items-start">
            <div class="flex flex-col items-center md:items-start">
                <img src="https://res.cloudinary.com/dkusr0hu1/image/upload/v1766748193/LOGO_SAHAB_cr3qjr.png" alt="Logo" class="h-32 mb-6 brightness-125">
                <p class="text-gray-400 font-semibold text-center md:text-left">L'excellence au service de vos voyages.</p>
            </div>
            <div class="flex flex-col items-center md:items-start">
                <h4 class="text-xl font-black mb-8 border-b-2 border-blue-600 pb-2">Nos Adresses</h4>
                <div class="space-y-4 text-gray-400">
                    <a href="https://maps.app.goo.gl/Qt5k2r5CWC7WQ7Cy9" target="_blank" class="flex gap-3 hover:text-white transition">
                        <i class="fas fa-map-marker-alt text-blue-500 mt-1"></i>
                        <span class="text-sm font-black text-white underline">Casablanca: Aml 4, Rue 27, NÂ°44, Bernoussi</span>
                    </a>
                    <a href="https://maps.app.goo.gl/aaxURvqcQiJPrpKt5" target="_blank" class="flex gap-3 hover:text-white transition">
                        <i class="fas fa-map-marker-alt text-amber-500 mt-1"></i>
                        <span class="text-xs">Tata: Hay Naser, Tata</span>
                    </a>
                    <a href="tel:0522759167" class="flex gap-3 hover:text-white transition">
                        <i class="fas fa-phone text-blue-500"></i>
                        <span dir="ltr">Fixe: 05.22.75.91.67</span>
                    </a>
                    <a href="https://wa.me/212623945729" target="_blank" class="flex gap-3 hover:text-white transition">
                        <i class="fab fa-whatsapp text-green-500"></i>
                        <span dir="ltr">Watts : +212 623 94 57 29</span>
                    </a>
                    <a href="mailto:agencesahab@gmail.com" class="flex gap-3 hover:text-white transition">
                        <i class="fas fa-envelope text-red-500"></i>
                        <span>Email: agencesahab@gmail.com</span>
                    </a>
                </div>
            </div>
            <div class="flex flex-col items-center md:items-start">
                <h4 class="text-xl font-black mb-8 border-b-2 border-blue-600 pb-2">Horaires</h4>
                <div class="grid gap-2 w-full text-sm text-gray-400">
                    <div class="flex justify-between border-b border-white/10 pb-1"><span>Lun - Jeu</span> <span>09:00 â€“ 18:30</span></div>
                    <div class="flex justify-between border-b border-white/10 pb-1"><span>Ven</span> <span>09:00 â€“ 18:30</span></div>
                    <div class="flex justify-between border-b border-white/10 pb-1"><span>Sam</span> <span>09:00 â€“ 13:00</span></div>
                    <div class="flex justify-between text-red-400 font-bold"><span>Dim</span> <span>FermÃ©</span></div>
                </div>
            </div>
            <div class="flex flex-col items-center md:items-end">
                <h4 class="text-xl font-black mb-8">Suivez-nous</h4>
                <div class="grid grid-cols-2 gap-4">
                    <a href="https://www.tiktok.com/@sahab_voyages" target="_blank" class="flex items-center gap-2 bg-gray-900 p-2 rounded hover:bg-white hover:text-black transition"><i class="fab fa-tiktok"></i> <span class="text-xs font-bold">TikTok</span></a>
                    <a href="https://www.instagram.com/sahabvoyages" target="_blank" class="flex items-center gap-2 bg-gray-900 p-2 rounded hover:bg-white hover:text-pink-600 transition"><i class="fab fa-instagram"></i> <span class="text-xs font-bold">Insta</span></a>
                    <a href="https://wa.me/212623945729" target="_blank" class="flex items-center gap-2 bg-gray-900 p-2 rounded hover:bg-white hover:text-green-600 transition"><i class="fab fa-whatsapp"></i> <span class="text-xs font-bold">WhatsApp</span></a>
                    <a href="https://www.facebook.com/sahabvoyages" target="_blank" class="flex items-center gap-2 bg-gray-900 p-2 rounded hover:bg-white hover:text-blue-600 transition"><i class="fab fa-facebook"></i> <span class="text-xs font-bold">FB</span></a>
                </div>
            </div>
        </div>
        <div class="text-center mt-16 border-t border-gray-900 pt-8 text-gray-500 font-bold uppercase tracking-widest">2026 SAHAB VOYAGES. TOUS DROITS RÃ‰SERVÃ‰S.</div>
    </footer>

    <script>
        // ============ CORE WEBSITE FUNCTIONS (Unchanged) ============
        function showSection(id) {
            document.querySelectorAll('.page-section').forEach(s => s.classList.remove('active-section'));
            document.getElementById(id).classList.add('active-section');
            document.getElementById('mobileMenu').classList.add('hidden');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        function toggleMenu() { document.getElementById('mobileMenu').classList.toggle('hidden'); }
        function filterOffers(cat) {
            document.querySelectorAll('.section-tab').forEach(t => t.classList.remove('active-tab', 'bg-white', 'shadow'));
            document.getElementById(`tab-${cat}`).classList.add('active-tab');
            document.querySelectorAll('.offer-card').forEach(card => {
                if(cat === 'all' || card.getAttribute('data-cat') === cat) card.style.display = 'flex';
                else card.style.display = 'none';
            });
        }

        // ============ UPGRADED SAHAB BOT - KNOWLEDGE BASE ============
        const sahabBotKnowledge = [
            {
                category: "Omra & Hajj",
                intents: ["omra", "hajj", "haj", "Ø¹Ù…Ø±Ø©", "Ø­Ø¬", "Ù…Ù†Ø§Ø³Ùƒ"],
                questions: [
                    { q: ["prix omra", "tarif omra", "combien coÃ»te une omra", "ÙƒÙ… ØªÙƒÙ„ÙØ© Ø§Ù„Ø¹Ù…Ø±Ø©"], a: "Nous avons plusieurs offres Omra selon la pÃ©riode (Ã©conomique, confort, luxe). Les prix commencent Ã  partir de XXXX MAD. <br>Cliquez sur le bouton ci-dessous pour voir tous les dÃ©tails et tarifs.", link: "https://wa.me/p/25709642965314217/212623945729" },
                    { q: ["dates omra janvier", "omra 2026 janvier", "Ø¹Ù…Ø±Ø© ÙŠÙ†Ø§ÙŠØ±"], a: "Omra Janvier 2026 : du 03 au 15 janv. ou 12 au 26 janv. Programme Ã©conomique disponible. <br><a href='https://wa.me/p/25709642965314217/212623945729' target='_blank'>ğŸ“ Plus d'infos via WhatsApp</a>" },
                    { q: ["omra ramadan", "omra ramadan 2026", "Ø¹Ù…Ø±Ø© Ø±Ù…Ø¶Ø§Ù†"], a: "Omra Ramadan 2026 : du 19 fÃ©vrier au 24 mars. Programme spirituel spÃ©cial avec sÃ©jour Ã  MÃ©dine et La Mecque. DÃ©couvrez notre programme complet.", link: "https://wa.me/p/26571919809063840/212623945729" },
                    { q: ["omra chaabane", "Ø¹Ù…Ø±Ø© Ø´Ø¹Ø¨Ø§Ù†"], a: "Omra ChaÃ¢bane 2026 : du 26 janvier au 9 fÃ©vrier. Une pÃ©riode bÃ©nie avant le Ramadan.", link: "https://wa.me/p/25828021510116298/212623945729" },
                    { q: ["hajj 2026", "Ø­Ø¬ 2026", "inscription hajj"], a: "Les inscriptions pour le Hajj 2026 sont ouvertes. Les places sont limitÃ©es. Contactez-nous dÃ¨s maintenant pour rÃ©server votre place et obtenir tous les dÃ©tails.", link: "https://wa.me/212623945729" },
                    { q: ["procÃ©dure omra", "documents nÃ©cessaires omra", "Ø£ÙˆØ±Ø§Ù‚ Ø§Ù„Ø¹Ù…Ø±Ø©"], a: "Pour l'Omra, il vous faut :<br>1. Passeport valide (au moins 6 mois)<br>2. Visa saoudien<br>3. Vaccins Ã  jour (mÃ©ningite ACWY est obligatoire)<br>4. Photos d'identitÃ©<br>Nous nous chargeons de toutes les dÃ©marches pour vous !" }
                ]
            },
            {
                category: "Visa",
                intents: ["visa", "ÙÙŠØ²Ø§", "ØªØ£Ø´ÙŠØ±Ø©"],
                questions: [
                    { q: ["visa arabie saoudite", "visa saoudien", "ØªØ£Ø´ÙŠØ±Ø© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©"], a: "Visa Arabie Saoudite :<br>â€¢ Visa 4 jours (tourisme)<br>â€¢ Visa 1 an, entrÃ©es multiples<br>Processing rapide. Documents requis : passeport et photo.", link: "https://wa.me/p/6635789499807855/212623945729" },
                    { q: ["visa qatar", "visa qatar prix", "ÙÙŠØ²Ø§ Ù‚Ø·Ø±"], a: "Visa Qatar disponible sous 2-3 jours ouvrables. Prix compÃ©titif. Commander directement via WhatsApp.", link: "https://wa.me/p/25491260960567909/212623945729" },
                    { q: ["visa Ã©mirats", "visa dubai", "visa eau", "ÙÙŠØ²Ø§ Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª"], a: "Visa Ã‰mirats Arabes Unis (Dubai, Abu Dhabi) : tourisme, transit, visite. DurÃ©e : 30 ou 90 jours.", link: "https://wa.me/212623945729" },
                    { q: ["visa combinÃ©", "visa golfe", "ÙÙŠØ²Ø§ Ø§Ù„Ø®Ù„ÙŠØ¬"], a: "Visa combinÃ© pour plusieurs pays du Golfe (Ã‰mirats, Arabie, Qatar, BahreÃ¯n, Oman). Parfait pour les voyages d'affaires ou touristiques multiples.", link: "https://wa.me/p/6655750361179310/212623945729" },
                    { q: ["visa egypte", "ÙÙŠØ²Ø§ Ù…ØµØ±"], a: "Visa Ã‰gypte disponible. Pour tourisme ou affaires. Nous avons besoin d'une copie de votre passeport.", link: "https://wa.me/212623945729" },
                    { q: ["dÃ©lai visa", "Ù…Ø¯Ø© Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„ÙÙŠØ²Ø§"], a: "Les dÃ©lais varient selon le pays :<br>â€¢ Qatar, Oman : 2-3 jours<br>â€¢ Arabie Saoudite : 3-5 jours<br>â€¢ Ã‰mirats : 1-2 jours<br>Contactez-nous pour un dÃ©lai prÃ©cis." }
                ]
            },
            {
                category: "Travel Packages",
                intents: ["voyage", "package", "Ø±Ø­Ù„Ø©", "Ø¬ÙˆÙ„Ø©", "Ø³ÙØ±"],
                questions: [
                    { q: ["voyage maroc", "circuit maroc", "Ø¬ÙˆÙ„Ø© ÙÙŠ Ø§Ù„Ù…ØºØ±Ø¨"], a: "DÃ©couvrez nos circuits au Maroc ! De Casablanca Ã  Marrakech, dÃ©sert du Sahara, et villes impÃ©riales. Forfaits tout inclus.", link: "https://wa.me/212623945729" },
                    { q: ["voyage Ã©gypte", "visiter l'Ã©gypte", "Ø±Ø­Ù„Ø© Ø¥Ù„Ù‰ Ù…ØµØ±"], a: "Explorez les pyramides, le Nil, et Louxor avec nos forfaits Ã‰gypte complets (vol + hÃ´tel + guide).", link: "https://wa.me/212623945729" },
                    { q: ["voyage turquie", "istanbul", "ØªØ±ÙƒÙŠØ§"], a: "Forfaits voyage pour la Turquie (Istanbul, Cappadoce, Antalya) disponibles. Contactez-nous pour les options et prix." },
                    { q: ["voyage asie", "malaisie indonÃ©sie", "Ø¢Ø³ÙŠØ§"], a: "Nous organisons des voyages en Malaisie, IndonÃ©sie, ThaÃ¯lande, Vietnam et Sri Lanka. Circuits culturels, plages, et aventure. Demandez nos brochures !" },
                    { q: ["voyage famille", "Ø¹Ø·Ù„Ø© Ø¹Ø§Ø¦Ù„ÙŠØ©"], a: "Nous crÃ©ons des voyages sur mesure pour les familles, avec des activitÃ©s adaptÃ©es Ã  tous les Ã¢ges. Parlez-nous de vos besoins." }
                ]
            },
            {
                category: "Billetterie & HÃ´tels",
                intents: ["billet", "avion", "vol", "rÃ©servation", "Ø­Ø¬Ø²", "ÙÙ†Ø¯Ù‚", "Ø·ÙŠØ±Ø§Ù†"],
                questions: [
                    { q: ["rÃ©servation billet avion", "Ø­Ø¬Ø² ØªØ°ÙƒØ±Ø© Ø·ÙŠØ±Ø§Ù†"], a: "Nous rÃ©servons des billets d'avion sur toutes les compagnies au meilleur prix. Donnez-nous vos dates et destinations.", link: "https://wa.me/p/9734168360040574/212623945729" },
                    { q: ["rÃ©servation hÃ´tel", "Ø­Ø¬Ø² ÙÙ†Ø¯Ù‚"], a: "RÃ©servation d'hÃ´tels dans le monde entier. Nous nÃ©gocions les meilleurs tarifs pour vous.", link: "https://wa.me/p/33021797887466015/212623945729" },
                    { q: ["hÃ´tel pour visa", "Ø­Ø¬Ø² ÙÙ†Ø¯Ù‚ Ù„Ù„ÙÙŠØ²Ø§"], a: "Nous fournissons une rÃ©servation d'hÃ´tel factice (pour visa) si nÃ©cessaire, conforme aux exigences des ambassades.", link: "https://wa.me/p/33661500800129900/212623945729" },
                    { q: ["vol pas cher", "Ø·ÙŠØ±Ø§Ù† Ø±Ø®ÙŠØµ"], a: "Nous trouvons les meilleures offres de vol. Envoyez-nous votre itinÃ©raire sur WhatsApp pour un devis gratuit." }
                ]
            },
            {
                category: "General & Contact",
                intents: ["contact", "adresse", "horaires", "tÃ©lÃ©phone", "Ø§ØªØµØ§Ù„", "Ø¹Ù†ÙˆØ§Ù†", "Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„"],
                questions: [
                    { q: ["adresse agence", "oÃ¹ Ãªtes-vous situÃ©", "localisation", "Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙˆÙƒØ§Ù„Ø©"], a: "ğŸ“ <strong>Agence principale</strong> : Aml 4, Rue 27, NÂ°44, Bernoussi, Casablanca.<br>ğŸ“Œ <strong>Agence Tata</strong> : Hay Naser, Tata.<br><a href='https://maps.app.goo.gl/Qt5k2r5CWC7WQ7Cy9' target='_blank' style='color: #25d366; font-weight:bold;'>ğŸ—ºï¸ Voir sur Google Maps</a>" },
                    { q: ["horaires d'ouverture", "quels sont vos horaires", "Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„"], a: "ğŸ•˜ <strong>Horaires :</strong><br>â€¢ Lundi - Jeudi : 9h00 â€“ 18h30<br>â€¢ Vendredi : 9h00 â€“ 18h30<br>â€¢ Samedi : 9h00 â€“ 13h00<br>â€¢ Dimanche : FermÃ©" },
                    { q: ["tÃ©lÃ©phone", "appeler", "numÃ©ro de tÃ©lÃ©phone", "Ù‡Ø§ØªÙ"], a: "ğŸ“ <strong>Nous appeler :</strong><br>â€¢ Fixe : <a href='tel:0522759167'>05.22.75.91.67</a><br>â€¢ WhatsApp : <a href='https://wa.me/212623945729' target='_blank'>+212 623 94 57 29</a>" },
                    { q: ["email", "adresse email", "Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"], a: "ğŸ“§ <strong>Ã‰crivez-nous :</strong> <a href='mailto:agencesahab@gmail.com'>agencesahab@gmail.com</a>" },
                    { q: ["qui Ãªtes vous", "Ø¹Ù† Ø§Ù„ÙˆÙƒØ§Ù„Ø©"], a: "Sahab Voyages est une agence de voyage marocaine spÃ©cialisÃ©e dans le Hajj, Omra, visas, et voyages organisÃ©s. Nous sommes basÃ©s Ã  Casablanca et Tata. Notre prioritÃ© est votre satisfaction." }
                ]
            }
        ];

        // ============ BOT ENGINE FUNCTIONS ============
        let conversationHistory = [];

        function toggleChat() {
            const win = document.getElementById('chatWindow');
            const isClosed = win.style.display !== 'flex';
            win.style.display = isClosed ? 'flex' : 'none';
            
            if (isClosed) {
                const msgs = document.getElementById('chatMsgs');
                msgs.innerHTML = `
                    <div class="msg msg-bot">
                        <strong>Bonjour ! ğŸ‘‹ Je suis l'assistant virtuel de Sahab Voyages.</strong><br><br>
                        Je peux vous renseigner sur :<br>
                        â€¢ ğŸ•‹ <strong>Omra & Hajj</strong> (prix, dates, programmes)<br>
                        â€¢ ğŸ›‚ <strong>Visas</strong> (Arabie, Qatar, Ã‰mirats, combinÃ©...)<br>
                        â€¢ âœˆï¸ <strong>Voyages organisÃ©s</strong> (Maroc, Ã‰gypte, Asie...)<br>
                        â€¢ ğŸ¨ <strong>Billets d'avion & HÃ´tels</strong><br>
                        â€¢ ğŸ“ <strong>Contacts & Adresses</strong><br><br>
                        <em>Posez-moi votre question en franÃ§ais ou en arabe, ou utilisez les boutons ci-dessous !</em>
                    </div>
                `;
                conversationHistory = [];
                msgs.scrollTop = msgs.scrollHeight;
            }
        }

        function sendQuickQuestion(question) {
            document.getElementById('userInput').value = question;
            sendUserMessage();
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendUserMessage();
            }
        }

        function sendUserMessage() {
            const inputField = document.getElementById('userInput');
            const userText = inputField.value.trim();
            if (!userText) return;

            addMessageToChat(userText, 'user');
            inputField.value = '';
            inputField.focus();
            
            setTimeout(() => findAndSendAnswer(userText), 600);
        }

        function addMessageToChat(text, sender) {
            const msgs = document.getElementById('chatMsgs');
            const msgDiv = document.createElement('div');
            msgDiv.className = `msg msg-${sender}`;
            msgDiv.innerHTML = text;
            msgs.appendChild(msgDiv);
            msgs.scrollTop = msgs.scrollHeight;
        }

        // SMART ANSWER FINDER - CORE LOGIC
        function findAndSendAnswer(userQuery) {
            const query = userQuery.toLowerCase();
            let foundAnswer = "Je ne suis pas sÃ»r de comprendre votre question. Pouvez-vous la reformuler ?<br><br>Vous pouvez aussi nous contacter directement sur <a href='https://wa.me/212623945729' style='color:#25d366; font-weight:bold;' target='_blank'>WhatsApp</a> pour une assistance immÃ©diate de notre Ã©quipe.";
            let foundLink = null;

            // 1. First, try to match a specific question in any category
            for (const category of sahabBotKnowledge) {
                for (const qa of category.questions) {
                    // Check if any keyword phrase from qa.q exists in the user query
                    const isMatch = qa.q.some(phrase => query.includes(phrase.toLowerCase()));
                    if (isMatch) {
                        foundAnswer = qa.a;
                        foundLink = qa.link || null;
                        break;
                    }
                }
                if (!foundAnswer.includes("Je ne suis pas sÃ»r")) break;
            }

            // 2. If no specific match, try to match a category intent
            if (foundAnswer.includes("Je ne suis pas sÃ»r")) {
                for (const category of sahabBotKnowledge) {
                    const hasIntent = category.intents.some(intent => query.includes(intent.toLowerCase()));
                    if (hasIntent) {
                        foundAnswer = `Vous posez une question sur <strong>${category.category}</strong>. Pour une rÃ©ponse prÃ©cise, merci de poser une question plus spÃ©cifique (ex: "prix omra", "dÃ©lai visa arabie").<br><br>Sinon, contactez-nous via <a href='https://wa.me/212623945729' style='color:#25d366;' target='_blank'>WhatsApp</a> pour parler Ã  un conseiller.`;
                        break;
                    }
                }
            }

            // 3. Add a WhatsApp link if a specific link was found
            let finalBotMessage = foundAnswer;
            if (foundLink) {
                finalBotMessage += `<br><br><a href="${foundLink}" target="_blank" style="display: inline-block; margin-top: 8px; padding: 8px 16px; background: #25d366; color: white; border-radius: 8px; font-weight: bold; text-decoration: none;">ğŸ’¬ Parler Ã  un conseiller sur WhatsApp</a>`;
            }

            // 4. Add a general WhatsApp prompt if no link was added (for generic answers)
            if (!foundLink && !foundAnswer.includes("WhatsApp")) {
                finalBotMessage += `<br><br><small>Pour plus de dÃ©tails ou un devis personnalisÃ©, contactez-nous sur <a href='https://wa.me/212623945729' style='color:#25d366;' target='_blank'>WhatsApp</a>.</small>`;
            }

            addMessageToChat(finalBotMessage, 'bot');
            conversationHistory.push({ q: userQuery, a: foundAnswer.substring(0, 100) });
        }
    </script>
</body>
</html>
